<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Coco Terminal</title>
    
    <link rel="icon" type="image/png" href="coco_sticker_1.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600&family=Space+Grotesk:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* --- DESIGN SYSTEM --- */
        * { box-sizing: border-box; }

        :root {
            --bg: #F4F4F0; 
            --text-main: #1A1A1A; 
            --text-sub: #666666;
            --accent: #00CC96;
            --love: #FF4D4D;
            --card-bg: #FFFFFF;
            --line: rgba(0,0,0,0.06);
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Manrope', sans-serif;
            /* DEFAULT: Fixed "App" feel for Desktop */
            overflow: hidden; 
            height: 100vh;
        }

        /* --- LAYOUT GRID --- */
        .dashboard-container {
            display: grid;
            grid-template-columns: 2.5fr 1fr;
            gap: 20px;
            padding: 90px 2.5% 30px 2.5%;
            max-width: 1800px;
            margin: 0 auto;
            height: 100vh;
            max-height: 100vh;
        }

        .right-column-wrapper {
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            height: 100%;
            overflow: hidden;
        }

        /* --- PANELS --- */
        .panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            height: 100%;
        }

        .panel-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 15px; border-bottom: 1px solid var(--line);
            padding-bottom: 10px;
            flex-shrink: 0;
            z-index: 10;
        }

        .panel-title {
            font-family: 'Space Grotesk', sans-serif; font-weight: 700;
            font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px;
            display: flex; align-items: center; gap: 10px;
        }

        .live-dot { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 10px var(--accent); animation: pulse 2s infinite; }

        /* --- CHART CONTAINERS --- */
        #tv-chart-container { 
            width: 100%; flex-grow: 1; min-height: 0; 
            border-radius: 10px; overflow: hidden; 
        }
        
        #wag-chart-container { 
            width: 100%; height: 200px; position: relative; 
        }

        /* --- NEURAL LINK (DARK MODE) --- */
        #neural-container {
            width: 100%; 
            flex-grow: 1; 
            min-height: 400px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            background: linear-gradient(180deg, #1A1A1A 0%, #0D0D0D 100%);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        #neural-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; 
        }

        .overlay-stats {
            position: absolute; bottom: 20px; left: 20px;
            font-family: 'JetBrains Mono'; 
            color: rgba(255,255,255,0.6); 
            font-size: 0.8rem; pointer-events: none; z-index: 10;
        }

        /* --- BUY BUTTON --- */
        .overlay-action {
            position: absolute; bottom: 20px; right: 20px;
            z-index: 20;
        }

        .btn-terminal {
            background: rgba(0, 204, 150, 0.1);
            color: var(--accent);
            border: 1px solid var(--accent);
            padding: 12px 24px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s ease;
            display: flex; align-items: center; gap: 10px;
            backdrop-filter: blur(5px);
            border-radius: 4px; 
        }

        .btn-terminal:hover {
            background: var(--accent);
            color: #000;
            box-shadow: 0 0 20px rgba(0, 204, 150, 0.4);
            transform: translateY(-2px);
        }

        /* --- NAV BAR --- */
        .top-bar {
            position: fixed; top: 0; left: 0; width: 100%;
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 2.5%; z-index: 100;
            pointer-events: none; 
            transition: all 0.3s ease;
        }
        
        .nav-back-pill {
            pointer-events: auto;
            font-family: 'Space Grotesk', sans-serif; font-weight: 700; font-size: 1rem;
            color: var(--text-main); text-decoration: none;
            background: rgba(255,255,255,0.5); backdrop-filter: blur(5px);
            padding: 10px 24px; border-radius: 50px; border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.1s ease, background 0.2s; 
            display: flex; align-items: center; gap: 8px;
        }
        .nav-back-pill:hover { background: rgba(255,255,255,0.8); transform: scale(1.02); }

        .nav-title-pill {
            pointer-events: auto;
            font-family: 'Courier New', monospace; font-size: 0.75rem;
            background: rgba(255,255,255,0.5); backdrop-filter: blur(5px);
            padding: 10px 16px; border-radius: 50px; border: 1px solid rgba(0,0,0,0.05);
            display: flex; align-items: center; gap: 8px; color: var(--text-sub); white-space: nowrap;
        }

        /* =========================================
           --- MOBILE RESPONSIVE FIXES ---
           ========================================= */
        @media (max-width: 1024px) {
            
            /* 1. ENABLE SCROLLING */
            body, html {
                height: auto !important;
                overflow-y: auto !important;
                overflow-x: hidden;
            }

            /* 2. STACK CONTAINERS */
            .dashboard-container { 
                display: flex; 
                flex-direction: column;
                height: auto;
                max-height: none;
                padding-top: 100px;
                padding-bottom: 40px;
            }

            /* 3. FIX NAV BAR OVERLAP */
            .top-bar {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
                padding: 15px 5%;
                background: linear-gradient(to bottom, rgba(244, 244, 240, 0.95), transparent);
            }
            .nav-back-pill, .nav-title-pill {
                width: 100%;
                justify-content: center;
            }

            /* 4. FIX PANEL HEIGHTS */
            .panel { 
                height: auto; 
                min-height: auto; 
                flex-shrink: 0;
            }
            
            /* Chart needs specific height on mobile */
            #tv-chart-container { 
                height: 400px; 
                min-height: 400px; 
            }

            /* Neural Link needs specific height on mobile */
            #neural-container {
                height: 350px;
                min-height: 350px;
            }

            .right-column-wrapper {
                height: auto;
                overflow: visible;
            }
        }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <nav class="top-bar">
        <a href="index.html" class="nav-back-pill">
            ‚Üê Return to Base
        </a>

        <div class="nav-title-pill">
            <span class="live-dot"></span> $PHP // TERMINAL_VIEW
        </div>
    </nav>

    <div class="dashboard-container">
        
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title"><span class="live-dot"></span> Market Data (JUP/USDC)</div>
            </div>
            <div id="tv-chart-container"></div>
        </div>

        <div class="right-column-wrapper">
            
            <div class="panel" style="padding: 0; border: none; background: transparent;">
                <div id="neural-container">
                    <div class="panel-header" style="position: absolute; top: 0; left: 0; width: 100%; padding: 20px; border: none; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);">
                        <div class="panel-title" style="color: white;">üï∏Ô∏è The Neural Link</div>
                    </div>
                    
                    <canvas id="neural-canvas"></canvas>
                    
                    <div class="overlay-stats">
                        > NODES_ACTIVE: <span style="color: var(--accent);">4,209</span><br>
                        > SERENITY_LEVEL: <span style="color: var(--accent);">99.9%</span>
                    </div>

                    <div class="overlay-action">
                        <a href="https://jup.ag/swap/SOL-JUP" target="_blank" class="btn-terminal">
                            <span style="font-size:1.2em;">‚ö°</span> BUY $PHP
                        </a>
                    </div>
                </div>
            </div>

            <div class="panel" style="flex: 0 0 280px; min-height: 280px;">
                <div class="panel-header">
                    <div class="panel-title">üêï Tail Velocity (WAGS/SEC)</div>
                    <div id="wag-value" style="font-family: 'JetBrains Mono'; color: var(--accent); font-weight: 700;">120 wps</div>
                </div>
                <div id="wag-chart-container">
                    <canvas id="wagChart"></canvas>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- 1. NEURAL LINK VISUALIZATION ---
        const canvas = document.getElementById('neural-canvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('neural-container');
        
        let width, height;
        let particles = [];
        
        const particleCount = 50; 
        const connectionDistance = 120;
        const mouseDistance = 150; 
        const maxSpeed = 0.6; 

        function resize() {
            width = canvas.width = container.offsetWidth;
            height = canvas.height = container.offsetHeight;
        }

        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.5; 
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2 + 1; 
            }

            update() {
                this.vx *= 0.99;
                this.vy *= 0.99;

                if (mouse.x != null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx*dx + dy*dy);
                    if (distance < mouseDistance) {
                        const force = (mouseDistance - distance) / mouseDistance;
                        this.vx += (dx / distance) * force * 0.01;
                        this.vy += (dy / distance) * force * 0.01;
                    }
                }

                if(Math.abs(this.vx) < 0.2) this.vx += (Math.random() - 0.5) * 0.02;
                if(Math.abs(this.vy) < 0.2) this.vy += (Math.random() - 0.5) * 0.02;

                this.vx = Math.max(Math.min(this.vx, maxSpeed), -maxSpeed);
                this.vy = Math.max(Math.min(this.vy, maxSpeed), -maxSpeed);

                this.x += this.vx;
                this.y += this.vy;

                if (this.x < 0 || this.x > width) this.vx *= -0.9;
                if (this.y < 0 || this.y > height) this.vy *= -0.9;
            }

            draw() {
                ctx.fillStyle = '#00CC96';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initNeural() {
            resize(); 
            particles = []; 
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
            animate();
        }

        const mouse = { x: null, y: null };
        container.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouse.x = e.clientX - rect.left;
            mouse.y = e.clientY - rect.top;
        });
        container.addEventListener('mouseleave', () => {
            mouse.x = null; mouse.y = null;
        });

        function animate() {
            ctx.clearRect(0, 0, width, height);
            
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();

                for (let j = i; j < particles.length; j++) {
                    let dx = particles[i].x - particles[j].x;
                    let dy = particles[i].y - particles[j].y;
                    let distance = Math.sqrt(dx*dx + dy*dy);

                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        const opacity = (1 - distance/connectionDistance) * 0.4; 
                        ctx.strokeStyle = `rgba(0, 204, 150, ${opacity})`; 
                        ctx.lineWidth = 0.8;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => { resize(); });
        setTimeout(initNeural, 100);


        // --- 2. TRADINGVIEW WIDGET ---
        const script = document.createElement('script');
        script.src = 'https://s3.tradingview.com/tv.js';
        script.async = true;
        script.onload = () => {
            new TradingView.widget({
                "autosize": true,
                "symbol": "PYTH:JUPUSD",
                "interval": "15",
                "timezone": "Etc/UTC",
                "theme": "light",
                "style": "1",
                "locale": "en",
                "enable_publishing": false,
                "hide_top_toolbar": false,
                "save_image": false,
                "container_id": "tv-chart-container"
            });
        };
        document.head.appendChild(script);

        // --- 3. TAIL WAG CHART ---
        const ctxWag = document.getElementById('wagChart').getContext('2d');
        const initialData = Array(50).fill(100);
        const wagChart = new Chart(ctxWag, {
            type: 'line',
            data: {
                labels: Array(50).fill(''),
                datasets: [{
                    label: 'Wag Velocity',
                    data: initialData,
                    borderColor: '#00CC96',
                    backgroundColor: 'rgba(0, 204, 150, 0.1)',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: true,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { display: false }, y: { display: false, min: 0, max: 200 } },
                animation: { duration: 0 }
            }
        });

        setInterval(() => {
            const volatility = Math.random() > 0.9 ? 50 : 10;
            const change = (Math.random() - 0.5) * volatility;
            let newVal = wagChart.data.datasets[0].data[wagChart.data.datasets[0].data.length - 1] + change;
            if (newVal > 180) newVal = 180;
            if (newVal < 20) newVal = 20;

            wagChart.data.datasets[0].data.shift();
            wagChart.data.datasets[0].data.push(newVal);
            
            const color = newVal > 100 ? '#00CC96' : '#FF9F43';
            wagChart.data.datasets[0].borderColor = color;
            wagChart.data.datasets[0].backgroundColor = newVal > 100 ? 'rgba(0, 204, 150, 0.1)' : 'rgba(255, 159, 67, 0.1)';
            
            wagChart.update();
            const valEl = document.getElementById('wag-value');
            valEl.innerText = Math.round(newVal) + " wps";
            valEl.style.color = color;
        }, 100);

        // --- 4. SEPARATION ANXIETY ---
        const originalTitle = document.title;
        const sadTitles = ["Coco misses you... ü•∫", "Don't leave me! ü¶¥", "Nap time? üí§", "Where are you? üêæ"];
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                document.title = sadTitles[Math.floor(Math.random() * sadTitles.length)];
            } else {
                document.title = originalTitle;
            }
        });

    </script>
</body>
</html>